# æ™ºæ…§é‡‡è´­ç³»ç»Ÿ

> ä¸ºç§‘ç ”é‡‡è´­æœåŠ¡ä¸­å¿ƒæ„å»ºçš„æ™ºèƒ½é‡‡è´­ç³»ç»Ÿï¼Œé›†æˆAIå¯¹è¯ã€ä»·æ ¼é¢„æµ‹ã€æ™ºèƒ½æ¨èç­‰å…ˆè¿›åŠŸèƒ½

## ç³»ç»Ÿäº®ç‚¹

- ğŸ¤– **AIæ™ºèƒ½å¯¹è¯** - æ”¯æŒGLM/é€šä¹‰åƒé—®/OpenAIï¼Œä¸“ä¸šé‡‡è´­é¢†åŸŸé—®ç­”
- ğŸ“ˆ **ä»·æ ¼é¢„æµ‹** - åŸºäºå†å²æ•°æ®çš„è¶‹åŠ¿é¢„æµ‹ï¼Œæä¾›è´­ä¹°æ—¶æœºå»ºè®®
- ğŸ”— **è·¨æ™ºèƒ½ä½“åä½œ** - éœ€æ±‚ã€ä»·æ ¼ã€åˆåŒç»¼åˆåˆ†æï¼Œé£é™©è¯„åˆ†
- ğŸ’¡ **æ™ºèƒ½æ¨è** - ä¸»åŠ¨æ¨èé‡‡è´­å»ºè®®ï¼Œä»·æ ¼é¢„è­¦æé†’
- ğŸ¨ **ç°ä»£UI** - å“åº”å¼è®¾è®¡ï¼Œæ·±è‰²ç§‘æŠ€é£æ ¼

## åŠŸèƒ½æ¨¡å—

### 1. ç³»ç»Ÿæ¦‚è§ˆï¼ˆé¦–é¡µï¼‰
- æ™ºèƒ½æ¨èæ¨ªå¹…ï¼ˆåŸºäºå¸‚åœºè¶‹åŠ¿ï¼‰
- ä»·æ ¼é¢„è­¦æç¤º
- å››å¤§æ™ºèƒ½ä½“çŠ¶æ€ç›‘æ§
- å¿«æ·æ“ä½œå…¥å£
- AIå¿«æ·åˆ†æï¼ˆæœåŠ¡å™¨/ç½‘ç»œ/å­˜å‚¨/è½¯ä»¶ï¼‰

### 2. AIæ™ºèƒ½å¯¹è¯
- å¤šè½®å¯¹è¯ï¼Œä¸Šä¸‹æ–‡ç†è§£
- å¤šä¼šè¯ç®¡ç†ï¼ˆUUIDéš”ç¦»ï¼‰
- é‡‡è´­ä¸“ä¸šé¢†åŸŸçŸ¥è¯†
- å»ºè®®æ“ä½œè‡ªåŠ¨ç”Ÿæˆ

### 3. éœ€æ±‚å®¡æŸ¥
- ä¸Šä¼ .docx/.txtéœ€æ±‚æ–‡æ¡£
- å…­è¦ç´ å®Œæ•´æ€§æ£€æŸ¥
- æ¨¡ç³Šè¡¨è¿°è¯†åˆ«ï¼ˆ"ç­‰"ã€"çº¦"ç­‰ï¼‰
- æŠ€æœ¯å‚æ•°å®¡æ ¸
- å®Œæ•´åº¦è¯„åˆ†

### 4. ä»·æ ¼å‚è€ƒ
- å†å²ä»·æ ¼æŸ¥è¯¢ï¼ˆ7å¤§ç±»åˆ«ï¼‰
- **ä»·æ ¼è¶‹åŠ¿é¢„æµ‹**ï¼ˆ1-6ä¸ªæœˆï¼‰
- 95%ç½®ä¿¡åŒºé—´
- è´­ä¹°æ—¶æœºå»ºè®®
- å¸‚åœºæ´å¯Ÿåˆ†æ
- æŠ¥ä»·åˆç†æ€§è¯„ä¼°

### 5. åˆåŒåˆ†æ
- åˆåŒè¦ç´ è¯†åˆ«
- é£é™©æ¡æ¬¾åˆ†çº§ï¼ˆé«˜/ä¸­/ä½ï¼‰
- æ¨¡ç³Šè¡¨è¿°æ£€æµ‹
- ä¿®æ”¹å»ºè®®ç”Ÿæˆ

## æŠ€æœ¯æ¶æ„

### åç«¯
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| FastAPI | Webæ¡†æ¶ |
| LangChain | LLMç¼–æ’ |
| SentenceTransformers | è¯­ä¹‰åµŒå…¥ |
| jieba | ä¸­æ–‡åˆ†è¯ |
| OpenAI SDK | LLM APIè°ƒç”¨ |

### å‰ç«¯
| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| Vue 3 | å‰ç«¯æ¡†æ¶ |
| Vite | æ„å»ºå·¥å…· |
| Element Plus | UIç»„ä»¶åº“ |
| ECharts | å›¾è¡¨å¯è§†åŒ– |
| Axios | HTTPå®¢æˆ·ç«¯ |

### æ™ºèƒ½ä½“æ¶æ„
```
AgentCoordinatorï¼ˆåè°ƒå™¨ï¼‰
â”œâ”€â”€ ChatAgent          - AIå¯¹è¯ï¼ˆæ”¯æŒGLM/é€šä¹‰/OpenAIï¼‰
â”œâ”€â”€ RequirementReviewer - éœ€æ±‚å®¡æŸ¥
â”œâ”€â”€ PriceReference      - ä»·æ ¼é¢„æµ‹ä¸åˆ†æ
â”œâ”€â”€ ContractAnalyzer    - åˆåŒé£é™©è¯†åˆ«
â””â”€â”€ KnowledgeBase       - è¯­ä¹‰çŸ¥è¯†åº“
```

## é¡¹ç›®ç»“æ„

```
cc-smart-procurement/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ agents/           # æ™ºèƒ½ä½“
â”‚   â”‚   â”‚   â”œâ”€â”€ chat_agent.py         # AIå¯¹è¯
â”‚   â”‚   â”‚   â”œâ”€â”€ price_reference.py    # ä»·æ ¼é¢„æµ‹
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_coordinator.py  # è·¨æ™ºèƒ½ä½“åè°ƒ
â”‚   â”‚   â”‚   â”œâ”€â”€ requirement_reviewer.py
â”‚   â”‚   â”‚   â””â”€â”€ contract_analyzer.py
â”‚   â”‚   â”œâ”€â”€ api/              # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.py
â”‚   â”‚   â”‚   â”œâ”€â”€ price.py
â”‚   â”‚   â”‚   â”œâ”€â”€ requirements.py
â”‚   â”‚   â”‚   â””â”€â”€ contract.py
â”‚   â”‚   â”œâ”€â”€ knowledge/        # çŸ¥è¯†åº“
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”œâ”€â”€ data/knowledge/       # çŸ¥è¯†æ–‡ä»¶
â”‚   â”œâ”€â”€ .env                  # LLMé…ç½®
â”‚   â””â”€â”€ requirements.txt
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ views/
â”‚       â”‚   â”œâ”€â”€ Home.vue      # æ™ºèƒ½ä»ªè¡¨æ¿
â”‚       â”‚   â”œâ”€â”€ Chat.vue      # AIå¯¹è¯
â”‚       â”‚   â”œâ”€â”€ Price.vue     # ä»·æ ¼é¢„æµ‹
â”‚       â”‚   â”œâ”€â”€ Requirements.vue
â”‚       â”‚   â””â”€â”€ Contract.vue
â”‚       â”œâ”€â”€ api/              # APIæœåŠ¡å±‚
â”‚       â””â”€â”€ router/
â”‚
â”œâ”€â”€ dev_new.sh                # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop_new.sh               # åœæ­¢è„šæœ¬
â””â”€â”€ README.md
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 20.19+ï¼ˆæˆ– 22.12+ï¼‰

### å®‰è£…ä¾èµ–

```bash
# åç«¯
cd backend
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# å‰ç«¯
cd frontend
npm install
```

### é…ç½®LLMï¼ˆå¯é€‰ï¼‰

åœ¨ `backend/` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# GLMï¼ˆæ™ºè°±AIï¼‰
GLM_API_KEY=your_glm_key
LLM_MODEL=glm-4-flash

# æˆ–é€šä¹‰åƒé—®
# DASHSCOPE_API_KEY=your_key
# LLM_MODEL=qwen-plus

# æˆ–OpenAI
# OPENAI_API_KEY=your_key
# LLM_MODEL=gpt-3.5-turbo
```

> ä¸é…ç½®LLMæ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨å…³é”®è¯åŒ¹é…æ¨¡å¼

### å¯åŠ¨æœåŠ¡

```bash
# æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨
./dev_new.sh

# æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨
# åç«¯
cd backend && source venv/bin/activate
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000

# å‰ç«¯
cd frontend && npm run dev
```

### è®¿é—®åœ°å€

| æœåŠ¡ | åœ°å€ |
|------|------|
| å‰ç«¯ç•Œé¢ | http://localhost:5173 |
| åç«¯API | http://localhost:8000 |
| APIæ–‡æ¡£ | http://localhost:8000/docs |

### åœæ­¢æœåŠ¡

```bash
./stop_new.sh
```

## æµ‹è¯•ä¸CI

### æœ¬åœ°æµ‹è¯•å‘½ä»¤

```bash
# åç«¯æµ‹è¯•
cd backend
./venv/bin/python -m pytest -q

# å‰ç«¯å•å…ƒæµ‹è¯•
cd frontend
npm run test:run

# å‰ç«¯æ„å»º
cd frontend
npm run build

# E2E å†’çƒŸæµ‹è¯•ï¼ˆ3æ¡æ ¸å¿ƒé“¾è·¯ï¼‰
cd frontend
npm run test:e2e:smoke

# E2E è”è°ƒæµ‹è¯•ï¼ˆçœŸå®åç«¯ï¼‰
cd frontend
npm run test:e2e:integration
```

### CI è´¨é‡é—¨ç¦

ä»“åº“å·²æä¾› GitHub Actions æµæ°´çº¿ï¼š`/.github/workflows/ci.yml`ï¼ŒåŒ…å«ï¼š

- Backendï¼šä¾èµ–å®‰è£… + è¯­æ³•æ£€æŸ¥ + `pytest`
- Frontendï¼š`npm run test:run` + `npm run build`
- E2E å†’çƒŸï¼ˆmock APIï¼‰ï¼š`npm run test:e2e:smoke`
- E2E è”è°ƒï¼ˆçœŸå®åç«¯ï¼‰ï¼š`npm run test:e2e:integration`

## APIæ¥å£

### AIå¯¹è¯
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/chat/conversation` | AIå¯¹è¯ |
| POST | `/api/chat/new-session` | åˆ›å»ºæ–°ä¼šè¯ |
| GET | `/api/chat/history/{id}` | è·å–å†å² |
| POST | `/api/chat/comprehensive-analysis` | ç»¼åˆåˆ†æ |

### ä»·æ ¼å‚è€ƒ
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| GET | `/api/price-reference` | æŸ¥è¯¢ä»·æ ¼ |
| GET | `/api/price-reference/predict` | **ä»·æ ¼é¢„æµ‹** |
| GET | `/api/price-reference/market-insights` | **å¸‚åœºæ´å¯Ÿ** |
| POST | `/api/price-reference/analyze` | æŠ¥ä»·åˆ†æ |

### å…¶ä»–
| æ–¹æ³• | ç«¯ç‚¹ | åŠŸèƒ½ |
|------|------|------|
| POST | `/api/review-requirements` | éœ€æ±‚å®¡æŸ¥ |
| POST | `/api/contract-analysis` | åˆåŒåˆ†æ |
| GET | `/api/health` | å¥åº·æ£€æŸ¥ |

## æ™ºèƒ½åŒ–ç‰¹æ€§

### ä»·æ ¼é¢„æµ‹ç®—æ³•
- çº¿æ€§å›å½’è¶‹åŠ¿åˆ†æ
- å­£èŠ‚æ€§å› å­è°ƒæ•´
- 95%ç½®ä¿¡åŒºé—´è®¡ç®—
- è´­ä¹°æ—¶æœºå»ºè®®

### è·¨æ™ºèƒ½ä½“åˆ†æ
- éœ€æ±‚-åˆåŒä¸€è‡´æ€§æ£€æŸ¥
- ç»¼åˆé£é™©è¯„åˆ†ï¼ˆ0-100ï¼‰
- é¢„ç®—åŒ¹é…åˆ†æ
- æ•´ä½“é‡‡è´­å»ºè®®

### LLMé›†æˆ
- ç³»ç»Ÿæç¤ºè¯ä¸“ä¸šåŒ–
- å¤šè½®ä¸Šä¸‹æ–‡è®°å¿†
- å…³é”®è¯åŒ¹é…é™çº§

## ç•Œé¢é¢„è§ˆ

ç³»ç»Ÿé‡‡ç”¨æ·±è‰²ç§‘æŠ€é£æ ¼ï¼š
- æ¸å˜èƒŒæ™¯ï¼ˆ#0f0f1a â†’ #1a1a2e â†’ #16213eï¼‰
- ç»ç’ƒæ‹Ÿæ€å¡ç‰‡
- å¹³æ»‘åŠ¨ç”»è¿‡æ¸¡
- å“åº”å¼å¸ƒå±€ï¼ˆæ”¯æŒç§»åŠ¨ç«¯ï¼‰

## è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å†…éƒ¨ä½¿ç”¨ã€‚
